services:
  - type: docker
    name: gastroreview-gateway
    plan: free
    env: docker
    buildCommand: docker build -t api-gateway .
    startCommand: java -jar /app/app.jar --server.port=${PORT:-8080} --eureka.instance.hostname=${RENDER_EXTERNAL_HOSTNAME:localhost} --eureka.client.serviceUrl.defaultZone=${EUREKA_SERVER_URL:http://localhost:8761/eureka/}
    envVars:
      - key: PORT
        value: "8080"
      - key: RENDER_EXTERNAL_HOSTNAME
        fromService:
          type: render_hostname
      - key: EUREKA_SERVER_URL
        value: http://gastroreview-eureka:8761/eureka/
